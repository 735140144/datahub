"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[6998],{3905:(e,a,t)=>{t.d(a,{Zo:()=>d,kt:()=>c});var n=t(67294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=n.createContext({}),u=function(e){var a=n.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},d=function(e){var a=u(e.components);return n.createElement(l.Provider,{value:a},e.children)},m={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},p=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=u(t),c=r,h=p["".concat(l,".").concat(c)]||p[c]||m[c]||o;return t?n.createElement(h,i(i({ref:a},d),{},{components:t})):n.createElement(h,i({ref:a},d))}));function c(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=t.length,i=new Array(o);i[0]=p;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var u=2;u<o;u++)i[u]=t[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}p.displayName="MDXCreateElement"},18679:(e,a,t)=>{t.d(a,{Z:()=>i});var n=t(67294),r=t(86010);const o="tabItem_Ymn6";function i(e){let{children:a,hidden:t,className:i}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(o,i),hidden:t},a)}},34259:(e,a,t)=>{t.d(a,{Z:()=>c});var n=t(83117),r=t(67294),o=t(86010),i=t(51048),s=t(33609),l=t(1943),u=t(72957);const d="tabList__CuJ",m="tabItem_LNqP";function p(e){const{lazy:a,block:t,defaultValue:i,values:p,groupId:c,className:h}=e,g=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),b=p??g.map((e=>{let{props:{value:a,label:t,attributes:n}}=e;return{value:a,label:t,attributes:n}})),f=(0,s.l)(b,((e,a)=>e.value===a.value));if(f.length>0)throw new Error(`Docusaurus error: Duplicate values "${f.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const y=null===i?i:i??g.find((e=>e.props.default))?.props.value??g[0].props.value;if(null!==y&&!b.some((e=>e.value===y)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${y}" but none of its children has the corresponding value. Available values are: ${b.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:k,setTabGroupChoices:v}=(0,l.U)(),[D,_]=(0,r.useState)(y),T=[],{blockElementScrollPositionUntilNextRender:N}=(0,u.o5)();if(null!=c){const e=k[c];null!=e&&e!==D&&b.some((a=>a.value===e))&&_(e)}const x=e=>{const a=e.currentTarget,t=T.indexOf(a),n=b[t].value;n!==D&&(N(a),_(n),null!=c&&v(c,String(n)))},w=e=>{let a=null;switch(e.key){case"Enter":x(e);break;case"ArrowRight":{const t=T.indexOf(e.currentTarget)+1;a=T[t]??T[0];break}case"ArrowLeft":{const t=T.indexOf(e.currentTarget)-1;a=T[t]??T[T.length-1];break}}a?.focus()};return r.createElement("div",{className:(0,o.Z)("tabs-container",d)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":t},h)},b.map((e=>{let{value:a,label:t,attributes:i}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:D===a?0:-1,"aria-selected":D===a,key:a,ref:e=>T.push(e),onKeyDown:w,onClick:x},i,{className:(0,o.Z)("tabs__item",m,i?.className,{"tabs__item--active":D===a})}),t??a)}))),a?(0,r.cloneElement)(g.filter((e=>e.props.value===D))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},g.map(((e,a)=>(0,r.cloneElement)(e,{key:a,hidden:e.props.value!==D})))))}function c(e){const a=(0,i.Z)();return r.createElement(p,(0,n.Z)({key:String(a)},e))}},54798:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>d,contentTitle:()=>l,default:()=>c,frontMatter:()=>s,metadata:()=>u,toc:()=>m});var n=t(83117),r=(t(67294),t(3905)),o=t(34259),i=t(18679);const s={title:"Domains",slug:"/api/tutorials/domains",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/api/tutorials/domains.md"},l="Domains",u={unversionedId:"docs/api/tutorials/domains",id:"docs/api/tutorials/domains",title:"Domains",description:"Why Would You Use Domains?",source:"@site/genDocs/docs/api/tutorials/domains.md",sourceDirName:"docs/api/tutorials",slug:"/api/tutorials/domains",permalink:"/docs/api/tutorials/domains",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/api/tutorials/domains.md",tags:[],version:"current",frontMatter:{title:"Domains",slug:"/api/tutorials/domains",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/api/tutorials/domains.md"},sidebar:"overviewSidebar",previous:{title:"Ownership",permalink:"/docs/api/tutorials/owners"},next:{title:"Deprecation",permalink:"/docs/api/tutorials/deprecation"}},d={},m=[{value:"Why Would You Use Domains?",id:"why-would-you-use-domains",level:2},{value:"Goal Of This Guide",id:"goal-of-this-guide",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Create Domain",id:"create-domain",level:2},{value:"Expected Outcomes of Creating Domain",id:"expected-outcomes-of-creating-domain",level:3},{value:"Read Domains",id:"read-domains",level:2},{value:"Add Domains",id:"add-domains",level:2},{value:"Expected Outcomes of Adding Domain",id:"expected-outcomes-of-adding-domain",level:3},{value:"Remove Domains",id:"remove-domains",level:2},{value:"Expected Outcomes of Removing Domain",id:"expected-outcomes-of-removing-domain",level:3}],p={toc:m};function c(e){let{components:a,...s}=e;return(0,r.kt)("wrapper",(0,n.Z)({},p,s,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"domains"},"Domains"),(0,r.kt)("h2",{id:"why-would-you-use-domains"},"Why Would You Use Domains?"),(0,r.kt)("p",null,"Domains are curated, top-level folders or categories where related assets can be explicitly grouped. Management of Domains can be centralized, or distributed out to Domain owners Currently, an asset can belong to only one Domain at a time.\nFor more information about domains, refer to ",(0,r.kt)("a",{parentName:"p",href:"/docs/domains"},"About DataHub Domains"),"."),(0,r.kt)("h3",{id:"goal-of-this-guide"},"Goal Of This Guide"),(0,r.kt)("p",null,"This guide will show you how to"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create a domain."),(0,r.kt)("li",{parentName:"ul"},"Read domains attached to a dataset."),(0,r.kt)("li",{parentName:"ul"},"Add a dataset to a domain"),(0,r.kt)("li",{parentName:"ul"},"Remove the domain from a dataset.")),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"For this tutorial, you need to deploy DataHub Quickstart and ingest sample data.\nFor detailed steps, please refer to ",(0,r.kt)("a",{parentName:"p",href:"/docs/quickstart"},"Datahub Quickstart Guide"),"."),(0,r.kt)("h2",{id:"create-domain"},"Create Domain"),(0,r.kt)(o.Z,{mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"graphql",label:"GraphQL",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'mutation createDomain {\n  createDomain(input: { name: "Marketing", description: "Entities related to the marketing department" })\n}\n')),(0,r.kt)("p",null,"If you see the following response, the operation was successful:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "createDomain": "<domain_urn>"\n  },\n  "extensions": {}\n}\n'))),(0,r.kt)(i.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl --location --request POST \'http://localhost:8080/api/graphql\' \\\n--header \'Authorization: Bearer <my-access-token>\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{ "query": "mutation createDomain { createDomain(input: { name: \\"Marketing\\", description: \\"Entities related to the marketing department.\\" }) }", "variables":{}}\'\n')),(0,r.kt)("p",null,"Expected Response:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{ "data": { "createDomain": "<domain_urn>" }, "extensions": {} }\n'))),(0,r.kt)(i.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# Inlined from /metadata-ingestion/examples/library/create_domain.py\nimport logging\n\nfrom datahub.emitter.mce_builder import make_domain_urn\nfrom datahub.emitter.mcp import MetadataChangeProposalWrapper\nfrom datahub.emitter.rest_emitter import DatahubRestEmitter\nfrom datahub.metadata.schema_classes import ChangeTypeClass, DomainPropertiesClass\n\nlog = logging.getLogger(__name__)\nlogging.basicConfig(level=logging.INFO)\n\ndomain_urn = make_domain_urn("marketing")\ndomain_properties_aspect = DomainPropertiesClass(\n    name="Marketing", description="Entities related to the marketing department"\n)\n\nevent: MetadataChangeProposalWrapper = MetadataChangeProposalWrapper(\n    entityType="domain",\n    changeType=ChangeTypeClass.UPSERT,\n    entityUrn=domain_urn,\n    aspect=domain_properties_aspect,\n)\n\nrest_emitter = DatahubRestEmitter(gms_server="http://localhost:8080")\nrest_emitter.emit(event)\nlog.info(f"Created domain {domain_urn}")\n\n')))),(0,r.kt)("h3",{id:"expected-outcomes-of-creating-domain"},"Expected Outcomes of Creating Domain"),(0,r.kt)("p",null,"You can now see ",(0,r.kt)("inlineCode",{parentName:"p"},"Marketing")," domain has been created under ",(0,r.kt)("inlineCode",{parentName:"p"},"Govern > Domains"),"."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"domain-created",src:t(69380).Z,width:"1846",height:"634"})),(0,r.kt)("h2",{id:"read-domains"},"Read Domains"),(0,r.kt)(o.Z,{mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"graphql",label:"GraphQL",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'query {\n  dataset(urn: "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)") {\n    domain {\n      associatedUrn\n      domain {\n        urn\n        properties {\n          name\n        }\n      }\n    }\n  }\n}\n')),(0,r.kt)("p",null,"If you see the following response, the operation was successful:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'{\n  "data": {\n    "dataset": {\n      "domain": {\n        "associatedUrn": "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)",\n        "domain": {\n          "urn": "urn:li:domain:71b3bf7b-2e3f-4686-bfe1-93172c8c4e10",\n          "properties": {\n            "name": "Marketing"\n          }\n        }\n      }\n    }\n  },\n  "extensions": {}\n}\n'))),(0,r.kt)(i.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl --location --request POST 'http://localhost:8080/api/graphql' \\\n--header 'Authorization: Bearer <my-access-token>' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{ \"query\": \"{ dataset(urn: \\\"urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)\\\") { domain { associatedUrn domain { urn properties { name } } } } }\", \"variables\":{}}'\n")),(0,r.kt)("p",null,"Expected Response:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "dataset": {\n      "domain": {\n        "associatedUrn": "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)",\n        "domain": {\n          "urn": "urn:li:domain:71b3bf7b-2e3f-4686-bfe1-93172c8c4e10",\n          "properties": { "name": "Marketing" }\n        }\n      }\n    }\n  },\n  "extensions": {}\n}\n'))),(0,r.kt)(i.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# Inlined from /metadata-ingestion/examples/library/dataset_query_domain.py\nfrom datahub.emitter.mce_builder import make_dataset_urn\n\n# read-modify-write requires access to the DataHubGraph (RestEmitter is not enough)\nfrom datahub.ingestion.graph.client import DatahubClientConfig, DataHubGraph\n\n# Imports for metadata model classes\nfrom datahub.metadata.schema_classes import DomainsClass\n\ndataset_urn = make_dataset_urn(platform="hive", name="fct_users_created", env="PROD")\n\ngms_endpoint = "http://localhost:8080"\ngraph = DataHubGraph(DatahubClientConfig(server=gms_endpoint))\n\n# Query multiple aspects from entity\nresult = graph.get_aspects_for_entity(\n    entity_urn=dataset_urn,\n    aspects=["domains"],\n    aspect_types=[DomainsClass],\n)\n\nprint(result)\n\n')))),(0,r.kt)("h2",{id:"add-domains"},"Add Domains"),(0,r.kt)(o.Z,{mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"graphql",label:"GraphQL",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'mutation setDomain {\n    setDomain(domainUrn: "urn:li:domain:marketing", entityUrn: "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)")\n}\n')),(0,r.kt)("p",null,"If you see the following response, the operation was successful:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'{\n  "data": {\n    "setDomain": true\n  },\n  "extensions": {}\n}\n'))),(0,r.kt)(i.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},'curl --location --request POST \'http://localhost:8080/api/graphql\' \\\n--header \'Authorization: Bearer <my-access-token>\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{ "query": "mutation setDomain { setDomain(entityUrn: "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)", domainUrn: "urn:li:domain:marketing")) }", "variables":{}}\'\n')),(0,r.kt)("p",null,"Expected Response:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{ "data": { "setDomain": true }, "extensions": {} }\n'))),(0,r.kt)(i.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# Inlined from /metadata-ingestion/examples/library/dataset_add_domain_execute_graphql.py\n# read-modify-write requires access to the DataHubGraph (RestEmitter is not enough)\nfrom datahub.ingestion.graph.client import DatahubClientConfig, DataHubGraph\n\ngms_endpoint = "http://localhost:8080"\ngraph = DataHubGraph(DatahubClientConfig(server=gms_endpoint))\n\n# Query multiple aspects from entity\nquery = """\nmutation setDomain {\n    setDomain(domainUrn: "urn:li:domain:marketing", entityUrn: "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)")\n}\n"""\nresult = graph.execute_graphql(query=query)\n\nprint(result)\n\n')))),(0,r.kt)("h3",{id:"expected-outcomes-of-adding-domain"},"Expected Outcomes of Adding Domain"),(0,r.kt)("p",null,"You can now see ",(0,r.kt)("inlineCode",{parentName:"p"},"Marketing")," domain has been added to the dataset."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"domain-added",src:t(1846).Z,width:"903",height:"750"})),(0,r.kt)("h2",{id:"remove-domains"},"Remove Domains"),(0,r.kt)(o.Z,{mdxType:"Tabs"},(0,r.kt)(i.Z,{value:"graphql",label:"GraphQL",default:!0,mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'mutation unsetDomain {\n    unsetDomain(\n      entityUrn:"urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)"\n    )\n}\n')),(0,r.kt)("p",null,"Expected Response:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'{\n  "data": {\n    "removeDomain": true\n  },\n  "extensions": {}\n}\n'))),(0,r.kt)(i.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl --location --request POST 'http://localhost:8080/api/graphql' \\\n--header 'Authorization: Bearer <my-access-token>' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{ \"query\": \"mutation unsetDomain { unsetDomain(entityUrn: \\\"urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)\\\") }\", \"variables\":{}}'\n"))),(0,r.kt)(i.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'# Inlined from /metadata-ingestion/examples/library/dataset_remove_domain_execute_graphql.py\n# read-modify-write requires access to the DataHubGraph (RestEmitter is not enough)\nfrom datahub.ingestion.graph.client import DatahubClientConfig, DataHubGraph\n\ngms_endpoint = "http://localhost:8080"\ngraph = DataHubGraph(DatahubClientConfig(server=gms_endpoint))\n\n# Query multiple aspects from entity\nquery = """\nmutation unsetDomain {\n    unsetDomain(\n      entityUrn:"urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)"\n    )\n}\n"""\nresult = graph.execute_graphql(query=query)\n\nprint(result)\n\n')))),(0,r.kt)("h3",{id:"expected-outcomes-of-removing-domain"},"Expected Outcomes of Removing Domain"),(0,r.kt)("p",null,"You can now see a domain ",(0,r.kt)("inlineCode",{parentName:"p"},"Marketing")," has been removed from the ",(0,r.kt)("inlineCode",{parentName:"p"},"fct_users_created")," dataset."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"domain-removed",src:t(76843).Z,width:"2632",height:"1048"})))}c.isMDXComponent=!0},1846:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/domain-added-67b9fb33d873085f9ad1cab6775b56c8.png"},69380:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/domain-created-e7a4f8ed5c54a0f42d08dc5949a8789a.png"},76843:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/domain-removed-b9cc27a2e551750078d97d4ab5c98402.png"}}]);