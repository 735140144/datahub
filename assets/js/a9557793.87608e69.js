"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[1040],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>c});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=p(a),c=o,g=d["".concat(l,".").concat(c)]||d[c]||m[c]||r;return a?n.createElement(g,i(i({ref:t},u),{},{components:a})):n.createElement(g,i({ref:t},u))}));function c(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=a.length,i=new Array(r);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var p=2;p<r;p++)i[p]=a[p];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},20159:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var n=a(83117),o=(a(67294),a(3905));const r={title:"Removing Tags From Datasets/Columns",slug:"/api/tutorials/removing-tags",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/api/tutorials/removing-tags.md"},i="Removing Tags From Datasets/Columns",s={unversionedId:"docs/api/tutorials/removing-tags",id:"docs/api/tutorials/removing-tags",title:"Removing Tags From Datasets/Columns",description:"Why Would You Remove Tags?",source:"@site/genDocs/docs/api/tutorials/removing-tags.md",sourceDirName:"docs/api/tutorials",slug:"/api/tutorials/removing-tags",permalink:"/docs/api/tutorials/removing-tags",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/api/tutorials/removing-tags.md",tags:[],version:"current",frontMatter:{title:"Removing Tags From Datasets/Columns",slug:"/api/tutorials/removing-tags",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/api/tutorials/removing-tags.md"},sidebar:"overviewSidebar",previous:{title:"Update Deprecation",permalink:"/docs/api/tutorials/update-deprecation"},next:{title:"Removing Terms From Datasets/Columns",permalink:"/docs/api/tutorials/removing-terms"}},l={},p=[{value:"Why Would You Remove Tags?",id:"why-would-you-remove-tags",level:2},{value:"Goal Of This Guide",id:"goal-of-this-guide",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Remove Tags With GraphQL",id:"remove-tags-with-graphql",level:2},{value:"GraphQL Explorer",id:"graphql-explorer",level:3},{value:"CURL",id:"curl",level:3},{value:"Remove Tags With Python SDK",id:"remove-tags-with-python-sdk",level:2},{value:"Expected Outcomes",id:"expected-outcomes",level:2}],u={toc:p};function m(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"removing-tags-from-datasetscolumns"},"Removing Tags From Datasets/Columns"),(0,o.kt)("h2",{id:"why-would-you-remove-tags"},"Why Would You Remove Tags?"),(0,o.kt)("p",null,"Tags are informal, loosely controlled labels that help in search & discovery. They can be added to datasets, dataset schemas, or containers, for an easy way to label or categorize entities \u2013 without having to associate them to a broader business glossary or vocabulary."),(0,o.kt)("p",null,"For more information about tags, refer to ",(0,o.kt)("a",{parentName:"p",href:"/docs/tags"},"About DataHub Tags"),"."),(0,o.kt)("h3",{id:"goal-of-this-guide"},"Goal Of This Guide"),(0,o.kt)("p",null,"This guide will show you how to remove a ",(0,o.kt)("inlineCode",{parentName:"p"},"Legacy")," from the ",(0,o.kt)("inlineCode",{parentName:"p"},"shipment_info")," column of a dataset called ",(0,o.kt)("inlineCode",{parentName:"p"},"SampleHdfsDataset"),".\nAdditionally, we will cover how to remove a tag from the dataset or from multiple entities."),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"For this tutorial, you need to deploy DataHub Quickstart and ingest sample data.\nFor detailed steps, please refer to ",(0,o.kt)("a",{parentName:"p",href:"/docs/quickstart"},"Datahub Quickstart Guide"),"."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Before removing tags, you need to ensure the targeted dataset and the tag are already present in your datahub.\nIf you attempt to manipulate entities that do not exist, your operation will fail.\nIn this guide, we will be using data from a sample ingestion.\nIf you want to know how to create tags using APIs & SDKs, please refer to ",(0,o.kt)("a",{parentName:"p",href:"/docs/api/tutorials/creating-tags"},"Creating Tags")," and ",(0,o.kt)("a",{parentName:"p",href:"/docs/api/tutorials/creating-datasets"},"Creating Datasets"),".")),(0,o.kt)("h2",{id:"remove-tags-with-graphql"},"Remove Tags With GraphQL"),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Please note that there are two available endpoints (",(0,o.kt)("inlineCode",{parentName:"p"},":8000"),", ",(0,o.kt)("inlineCode",{parentName:"p"},":9002"),") to access ",(0,o.kt)("inlineCode",{parentName:"p"},"graphql"),".\nFor more information about the differences between these endpoints, please refer to ",(0,o.kt)("a",{parentName:"p",href:"/docs/metadata-service#graphql-api"},"DataHub Metadata Service"))),(0,o.kt)("h3",{id:"graphql-explorer"},"GraphQL Explorer"),(0,o.kt)("p",null,"GraphQL Explorer is the fastest way to experiment with ",(0,o.kt)("inlineCode",{parentName:"p"},"graphql")," without any dependencies.\nNavigate to GraphQL Explorer (",(0,o.kt)("inlineCode",{parentName:"p"},"http://localhost:9002/api/graphiql"),") and run the following query."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'mutation removeTag {\n    removeTag(\n      input: {\n        tagUrn: "urn:li:tag:Legacy",\n        resourceUrn: "urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)",\n        subResourceType:DATASET_FIELD,\n        subResource:"shipment_info"})\n}\n')),(0,o.kt)("p",null,"Note that you can also remove a tag from a dataset if you don't specify ",(0,o.kt)("inlineCode",{parentName:"p"},"subResourceType")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"subResource"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'mutation removeTag {\n    removeTag(\n      input: {\n        tagUrn: "urn:li:tag:Legacy",\n        resourceUrn: "urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)",\n      }\n    )\n}\n')),(0,o.kt)("p",null,"Note that you can also remove tags from multiple entities or subresource using ",(0,o.kt)("inlineCode",{parentName:"p"},"batchRemoveTags"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'mutation batchRemoveTags {\n    batchRemoveTags(\n      input: {\n        tagUrns: ["urn:li:tag:Legacy"],\n        resources: [\n          { resourceUrn:"urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)"} ,\n          { resourceUrn:"urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)"} ,]\n      }\n    )\n}\n')),(0,o.kt)("p",null,"If you see the following response, the operation was successful:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'{\n  "data": {\n    "removeTag": true\n  },\n  "extensions": {}\n}\n')),(0,o.kt)("h3",{id:"curl"},"CURL"),(0,o.kt)("p",null,"With CURL, you need to provide tokens. To generate a token, please refer to ",(0,o.kt)("a",{parentName:"p",href:"/docs/api/graphql/token-management"},"Access Token Management"),".\nWith ",(0,o.kt)("inlineCode",{parentName:"p"},"accessToken"),", you can run the following command."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'curl --location --request POST \'http://localhost:8080/api/graphql\' \\\n--header \'Authorization: Bearer <my-access-token>\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{ "query": "mutation removeTag { removeTag(input: { tagUrn: \\"urn:li:tag:Legacy\\", resourceUrn: \\"urn:li:dataset:(urn:li:dataPlatform:hdfs,SampleHdfsDataset,PROD)\\" }) }", "variables":{}}\'\n')),(0,o.kt)("p",null,"Expected Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{ "data": { "removeTag": true }, "extensions": {} }\n')),(0,o.kt)("h2",{id:"remove-tags-with-python-sdk"},"Remove Tags With Python SDK"),(0,o.kt)("p",null,"The following code removes a tag named ",(0,o.kt)("inlineCode",{parentName:"p"},"Legacy")," from ",(0,o.kt)("inlineCode",{parentName:"p"},"shipment_info")," column of a dataset called ",(0,o.kt)("inlineCode",{parentName:"p"},"SampleHdfsDataset"),"."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Coming Soon!")),(0,o.kt)("p",null,"We're using the ",(0,o.kt)("inlineCode",{parentName:"p"},"MetdataChangeProposalWrapper")," to change entities in this example.\nFor more information about the ",(0,o.kt)("inlineCode",{parentName:"p"},"MetadataChangeProposal"),", please refer to ",(0,o.kt)("a",{parentName:"p",href:"/docs/advanced/mcp-mcl"},"MetadataChangeProposal & MetadataChangeLog Events")),(0,o.kt)("h2",{id:"expected-outcomes"},"Expected Outcomes"),(0,o.kt)("p",null,"You can now see ",(0,o.kt)("inlineCode",{parentName:"p"},"Legacy")," tag has been removed to ",(0,o.kt)("inlineCode",{parentName:"p"},"shipment_info")," column."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"tag-removed",src:a(77089).Z,width:"1990",height:"750"})))}m.isMDXComponent=!0},77089:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/tag-removed-7d13233d192c36dc8041b4e054c96438.png"}}]);