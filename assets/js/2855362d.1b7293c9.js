"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[8855],{3905:(e,a,t)=>{t.d(a,{Zo:()=>m,kt:()=>c});var n=t(67294);function o(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){o(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,n,o=function(e,a){if(null==e)return{};var t,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(o[t]=e[t]);return o}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=n.createContext({}),d=function(e){var a=n.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},m=function(e){var a=d(e.components);return n.createElement(s.Provider,{value:a},e.children)},u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},p=n.forwardRef((function(e,a){var t=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),p=d(t),c=o,h=p["".concat(s,".").concat(c)]||p[c]||u[c]||r;return t?n.createElement(h,i(i({ref:a},m),{},{components:t})):n.createElement(h,i({ref:a},m))}));function c(e,a){var t=arguments,o=a&&a.mdxType;if("string"==typeof e||o){var r=t.length,i=new Array(r);i[0]=p;var l={};for(var s in a)hasOwnProperty.call(a,s)&&(l[s]=a[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var d=2;d<r;d++)i[d]=t[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}p.displayName="MDXCreateElement"},18679:(e,a,t)=>{t.d(a,{Z:()=>i});var n=t(67294),o=t(86010);const r="tabItem_Ymn6";function i(e){let{children:a,hidden:t,className:i}=e;return n.createElement("div",{role:"tabpanel",className:(0,o.Z)(r,i),hidden:t},a)}},34259:(e,a,t)=>{t.d(a,{Z:()=>c});var n=t(83117),o=t(67294),r=t(86010),i=t(51048),l=t(33609),s=t(1943),d=t(72957);const m="tabList__CuJ",u="tabItem_LNqP";function p(e){const{lazy:a,block:t,defaultValue:i,values:p,groupId:c,className:h}=e,g=o.Children.map(e.children,(e=>{if((0,o.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),f=p??g.map((e=>{let{props:{value:a,label:t,attributes:n}}=e;return{value:a,label:t,attributes:n}})),k=(0,l.l)(f,((e,a)=>e.value===a.value));if(k.length>0)throw new Error(`Docusaurus error: Duplicate values "${k.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const b=null===i?i:i??g.find((e=>e.props.default))?.props.value??g[0].props.value;if(null!==b&&!f.some((e=>e.value===b)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${b}" but none of its children has the corresponding value. Available values are: ${f.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:y,setTabGroupChoices:v}=(0,s.U)(),[D,N]=(0,o.useState)(b),T=[],{blockElementScrollPositionUntilNextRender:_}=(0,d.o5)();if(null!=c){const e=y[c];null!=e&&e!==D&&f.some((a=>a.value===e))&&N(e)}const w=e=>{const a=e.currentTarget,t=T.indexOf(a),n=f[t].value;n!==D&&(_(a),N(n),null!=c&&v(c,String(n)))},O=e=>{let a=null;switch(e.key){case"Enter":w(e);break;case"ArrowRight":{const t=T.indexOf(e.currentTarget)+1;a=T[t]??T[0];break}case"ArrowLeft":{const t=T.indexOf(e.currentTarget)-1;a=T[t]??T[T.length-1];break}}a?.focus()};return o.createElement("div",{className:(0,r.Z)("tabs-container",m)},o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":t},h)},f.map((e=>{let{value:a,label:t,attributes:i}=e;return o.createElement("li",(0,n.Z)({role:"tab",tabIndex:D===a?0:-1,"aria-selected":D===a,key:a,ref:e=>T.push(e),onKeyDown:O,onClick:w},i,{className:(0,r.Z)("tabs__item",u,i?.className,{"tabs__item--active":D===a})}),t??a)}))),a?(0,o.cloneElement)(g.filter((e=>e.props.value===D))[0],{className:"margin-top--md"}):o.createElement("div",{className:"margin-top--md"},g.map(((e,a)=>(0,o.cloneElement)(e,{key:a,hidden:e.props.value!==D})))))}function c(e){const a=(0,i.Z)();return o.createElement(p,(0,n.Z)({key:String(a)},e))}},48669:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>m,contentTitle:()=>s,default:()=>c,frontMatter:()=>l,metadata:()=>d,toc:()=>u});var n=t(83117),o=(t(67294),t(3905)),r=t(34259),i=t(18679);const l={title:"Modifying Domains On Dataset",slug:"/api/tutorials/modifying-dataset-domains",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/api/tutorials/modifying-dataset-domains.md"},s="Modifying Domains On Dataset",d={unversionedId:"docs/api/tutorials/modifying-dataset-domains",id:"docs/api/tutorials/modifying-dataset-domains",title:"Modifying Domains On Dataset",description:"Why Would You Use Domains?",source:"@site/genDocs/docs/api/tutorials/modifying-dataset-domains.md",sourceDirName:"docs/api/tutorials",slug:"/api/tutorials/modifying-dataset-domains",permalink:"/docs/api/tutorials/modifying-dataset-domains",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/api/tutorials/modifying-dataset-domains.md",tags:[],version:"current",frontMatter:{title:"Modifying Domains On Dataset",slug:"/api/tutorials/modifying-dataset-domains",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/api/tutorials/modifying-dataset-domains.md"},sidebar:"overviewSidebar",previous:{title:"Modifying Owners",permalink:"/docs/api/tutorials/modifying-dataset-owners"},next:{title:"Modifying Dataset",permalink:"/docs/api/tutorials/modifying-datasets"}},m={},u=[{value:"Why Would You Use Domains?",id:"why-would-you-use-domains",level:2},{value:"Goal Of This Guide",id:"goal-of-this-guide",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Create Domain",id:"create-domain",level:2},{value:"Expected Outcomes of Creating Domain",id:"expected-outcomes-of-creating-domain",level:3},{value:"Read Domains",id:"read-domains",level:2},{value:"Add Domains",id:"add-domains",level:2},{value:"Expected Outcomes of Adding Domain",id:"expected-outcomes-of-adding-domain",level:3},{value:"Remove Domains",id:"remove-domains",level:2},{value:"Expected Outcomes of Removing Domain",id:"expected-outcomes-of-removing-domain",level:3}],p={toc:u};function c(e){let{components:a,...l}=e;return(0,o.kt)("wrapper",(0,n.Z)({},p,l,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"modifying-domains-on-dataset"},"Modifying Domains On Dataset"),(0,o.kt)("h2",{id:"why-would-you-use-domains"},"Why Would You Use Domains?"),(0,o.kt)("p",null,"Domains are curated, top-level folders or categories where related assets can be explicitly grouped. Management of Domains can be centralized, or distributed out to Domain owners Currently, an asset can belong to only one Domain at a time.\nFor more information about domains, refer to ",(0,o.kt)("a",{parentName:"p",href:"/docs/domains"},"About DataHub Domains"),"."),(0,o.kt)("h3",{id:"goal-of-this-guide"},"Goal Of This Guide"),(0,o.kt)("p",null,"This guide will show you how to "),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"create a domain named ",(0,o.kt)("inlineCode",{parentName:"li"},"Marketing")),(0,o.kt)("li",{parentName:"ul"},"read domains attached to a dataset ",(0,o.kt)("inlineCode",{parentName:"li"},"fct_users_created"),"."),(0,o.kt)("li",{parentName:"ul"},"add a dataset named ",(0,o.kt)("inlineCode",{parentName:"li"},"fct_users_created")," to a domain named ",(0,o.kt)("inlineCode",{parentName:"li"},"Marketing"),"."),(0,o.kt)("li",{parentName:"ul"},"remove the domain ",(0,o.kt)("inlineCode",{parentName:"li"},"Marketing")," from the ",(0,o.kt)("inlineCode",{parentName:"li"},"fct_users_created")," dataset.")),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"For this tutorial, you need to deploy DataHub Quickstart and ingest sample data.\nFor detailed steps, please refer to ",(0,o.kt)("a",{parentName:"p",href:"/docs/quickstart"},"Datahub Quickstart Guide"),"."),(0,o.kt)("h2",{id:"create-domain"},"Create Domain"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"graphql",label:"GraphQL",default:!0,mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'mutation createDomain {\n  createDomain(input: { name: "Marketing", description: "Entities related to the marketing department" })\n}\n')),(0,o.kt)("p",null,"If you see the following response, the operation was successful:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "createDomain": "<domain_urn>"\n  },\n  "extensions": {}\n}\n'))),(0,o.kt)(i.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'curl --location --request POST \'http://localhost:8080/api/graphql\' \\\n--header \'Authorization: Bearer <my-access-token>\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{ "query": "mutation createDomain { createDomain(input: { name: \\"Marketing\\", description: \\"Entities related to the marketing department.\\" }) }", "variables":{}}\'\n')),(0,o.kt)("p",null,"Expected Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{ "data": { "createDomain": "<domain_urn>" }, "extensions": {} }\n'))),(0,o.kt)(i.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'# Inlined from /metadata-ingestion/examples/library/create_domain.py\nimport logging\n\nfrom datahub.emitter.mce_builder import make_domain_urn\nfrom datahub.emitter.mcp import MetadataChangeProposalWrapper\nfrom datahub.emitter.rest_emitter import DatahubRestEmitter\nfrom datahub.metadata.schema_classes import ChangeTypeClass, DomainPropertiesClass\n\nlog = logging.getLogger(__name__)\nlogging.basicConfig(level=logging.INFO)\n\ndomain_urn = make_domain_urn("marketing")\ndomain_properties_aspect = DomainPropertiesClass(\n    name="Marketing", description="Entities related to the marketing department"\n)\n\nevent: MetadataChangeProposalWrapper = MetadataChangeProposalWrapper(\n    entityType="domain",\n    changeType=ChangeTypeClass.UPSERT,\n    entityUrn=domain_urn,\n    aspect=domain_properties_aspect,\n)\n\nrest_emitter = DatahubRestEmitter(gms_server="http://localhost:8080")\nrest_emitter.emit(event)\nlog.info(f"Created domain {domain_urn}")\n\n')))),(0,o.kt)("h3",{id:"expected-outcomes-of-creating-domain"},"Expected Outcomes of Creating Domain"),(0,o.kt)("p",null,"You can now see ",(0,o.kt)("inlineCode",{parentName:"p"},"Marketing")," domain has been created under ",(0,o.kt)("inlineCode",{parentName:"p"},"Govern > Domains"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"domain-created",src:t(69380).Z,width:"1846",height:"634"})),(0,o.kt)("h2",{id:"read-domains"},"Read Domains"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"graphql",label:"GraphQL",default:!0,mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'query {\n  dataset(urn: "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)") {\n    domain {\n      associatedUrn\n      domain {\n        urn\n        properties {\n          name\n        }\n      }\n    }\n  }\n}\n')),(0,o.kt)("p",null,"If you see the following response, the operation was successful:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'{\n  "data": {\n    "dataset": {\n      "domain": {\n        "associatedUrn": "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)",\n        "domain": {\n          "urn": "urn:li:domain:71b3bf7b-2e3f-4686-bfe1-93172c8c4e10",\n          "properties": {\n            "name": "Marketing"\n          }\n        }\n      }\n    }\n  },\n  "extensions": {}\n}\n'))),(0,o.kt)(i.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"curl --location --request POST 'http://localhost:8080/api/graphql' \\\n--header 'Authorization: Bearer <my-access-token>' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{ \"query\": \"{ dataset(urn: \\\"urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)\\\") { domain { associatedUrn domain { urn properties { name } } } } }\", \"variables\":{}}'\n")),(0,o.kt)("p",null,"Expected Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "data": {\n    "dataset": {\n      "domain": {\n        "associatedUrn": "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)",\n        "domain": {\n          "urn": "urn:li:domain:71b3bf7b-2e3f-4686-bfe1-93172c8c4e10",\n          "properties": { "name": "Marketing" }\n        }\n      }\n    }\n  },\n  "extensions": {}\n}\n'))),(0,o.kt)(i.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Coming Soon!")))),(0,o.kt)("h2",{id:"add-domains"},"Add Domains"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"graphql",label:"GraphQL",default:!0,mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'mutation setDomain {\n    setDomain(domainUrn: "urn:li:domain:marketing", entityUrn: "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)")\n}\n')),(0,o.kt)("p",null,"If you see the following response, the operation was successful:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'{\n  "data": {\n    "setDomain": true\n  },\n  "extensions": {}\n}\n'))),(0,o.kt)(i.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},'curl --location --request POST \'http://localhost:8080/api/graphql\' \\\n--header \'Authorization: Bearer <my-access-token>\' \\\n--header \'Content-Type: application/json\' \\\n--data-raw \'{ "query": "mutation setDomain { setDomain(entityUrn: "urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)", domainUrn: "urn:li:domain:marketing")) }", "variables":{}}\'\n')),(0,o.kt)("p",null,"Expected Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{ "data": { "setDomain": true }, "extensions": {} }\n'))),(0,o.kt)(i.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Coming Soon!")))),(0,o.kt)("p",null,"With GraphQL"),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Please note that there are two available endpoints (",(0,o.kt)("inlineCode",{parentName:"p"},":8000"),", ",(0,o.kt)("inlineCode",{parentName:"p"},":9002"),") to access ",(0,o.kt)("inlineCode",{parentName:"p"},"graphql"),".\nFor more information about the differences between these endpoints, please refer to ",(0,o.kt)("a",{parentName:"p",href:"/docs/metadata-service#graphql-api"},"DataHub Metadata Service"))),(0,o.kt)("h3",{id:"expected-outcomes-of-adding-domain"},"Expected Outcomes of Adding Domain"),(0,o.kt)("p",null,"You can now see ",(0,o.kt)("inlineCode",{parentName:"p"},"CustomerAccount")," domain has been added to ",(0,o.kt)("inlineCode",{parentName:"p"},"user_name")," column."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"tag-added",src:t(85353).Z,width:"2242",height:"898"})),(0,o.kt)("h2",{id:"remove-domains"},"Remove Domains"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(i.Z,{value:"graphql",label:"GraphQL",default:!0,mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'mutation unsetDomain {\n    unsetDomain(\n      entityUrn:"urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)"\n    )\n}\n')),(0,o.kt)("p",null,"Expected Response:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},'{\n  "data": {\n    "removeDomain": true\n  },\n  "extensions": {}\n}\n'))),(0,o.kt)(i.Z,{value:"curl",label:"Curl",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"curl --location --request POST 'http://localhost:8080/api/graphql' \\\n--header 'Authorization: Bearer <my-access-token>' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{ \"query\": \"mutation unsetDomain { unsetDomain(entityUrn: \\\"urn:li:dataset:(urn:li:dataPlatform:hive,fct_users_created,PROD)\\\") }\", \"variables\":{}}'\n"))),(0,o.kt)(i.Z,{value:"python",label:"Python",mdxType:"TabItem"},(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Coming Soon! ")))),(0,o.kt)("h3",{id:"expected-outcomes-of-removing-domain"},"Expected Outcomes of Removing Domain"),(0,o.kt)("p",null,"You can now see a domain ",(0,o.kt)("inlineCode",{parentName:"p"},"Marketing")," has been removed from the ",(0,o.kt)("inlineCode",{parentName:"p"},"fct_users_created")," dataset."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"domain-removed",src:t(76843).Z,width:"2632",height:"1048"})))}c.isMDXComponent=!0},69380:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/domain-created-e7a4f8ed5c54a0f42d08dc5949a8789a.png"},76843:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/domain-removed-b9cc27a2e551750078d97d4ab5c98402.png"},85353:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/tag-added-0ea8788c276f043cc1e260e97bd7843a.png"}}]);