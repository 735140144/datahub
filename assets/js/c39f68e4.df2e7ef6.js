"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[3751],{3905:(t,e,n)=>{n.d(e,{Zo:()=>p,kt:()=>m});var a=n(67294);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e){if(null==t)return{};var n,a,i=function(t,e){if(null==t)return{};var n,a,i={},o=Object.keys(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(a=0;a<o.length;a++)n=o[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var d=a.createContext({}),l=function(t){var e=a.useContext(d),n=e;return t&&(n="function"==typeof t?t(e):r(r({},e),t)),n},p=function(t){var e=l(t.components);return a.createElement(d.Provider,{value:e},t.children)},c={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},u=a.forwardRef((function(t,e){var n=t.components,i=t.mdxType,o=t.originalType,d=t.parentName,p=s(t,["components","mdxType","originalType","parentName"]),u=l(n),m=i,h=u["".concat(d,".").concat(m)]||u[m]||c[m]||o;return n?a.createElement(h,r(r({ref:e},p),{},{components:n})):a.createElement(h,r({ref:e},p))}));function m(t,e){var n=arguments,i=e&&e.mdxType;if("string"==typeof t||i){var o=n.length,r=new Array(o);r[0]=u;var s={};for(var d in e)hasOwnProperty.call(e,d)&&(s[d]=e[d]);s.originalType=t,s.mdxType="string"==typeof t?t:i,r[1]=s;for(var l=2;l<o;l++)r[l]=n[l];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},78792:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>d,contentTitle:()=>r,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var a=n(83117),i=(n(67294),n(3905));const o={title:"Adding Description on Datasets",slug:"/tools/tutorials/adding-dataset-description",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/tools/tutorials/adding-dataset-description.md"},r="Adding Description on Datasets",s={unversionedId:"docs/tools/tutorials/adding-dataset-description",id:"docs/tools/tutorials/adding-dataset-description",title:"Adding Description on Datasets",description:"Why Would You Add Description on Dataset?",source:"@site/genDocs/docs/tools/tutorials/adding-dataset-description.md",sourceDirName:"docs/tools/tutorials",slug:"/tools/tutorials/adding-dataset-description",permalink:"/docs/tools/tutorials/adding-dataset-description",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/tools/tutorials/adding-dataset-description.md",tags:[],version:"current",frontMatter:{title:"Adding Description on Datasets",slug:"/tools/tutorials/adding-dataset-description",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/tools/tutorials/adding-dataset-description.md"},sidebar:"overviewSidebar",previous:{title:"Adding Owners",permalink:"/docs/tools/tutorials/adding-ownerships"},next:{title:"Adding Description on Columns",permalink:"/docs/tools/tutorials/adding-column-description"}},d={},l=[{value:"Why Would You Add Description on Dataset?",id:"why-would-you-add-description-on-dataset",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Add Description With GraphQL (Not Supported)",id:"add-description-with-graphql-not-supported",level:2},{value:"Add Description With Python SDK",id:"add-description-with-python-sdk",level:2},{value:"Expected Outcomes",id:"expected-outcomes",level:2}],p={toc:l};function c(t){let{components:e,...o}=t;return(0,i.kt)("wrapper",(0,a.Z)({},p,o,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"adding-description-on-datasets"},"Adding Description on Datasets"),(0,i.kt)("h2",{id:"why-would-you-add-description-on-dataset"},"Why Would You Add Description on Dataset?"),(0,i.kt)("p",null,"Adding a description and related link to a dataset can provide important information about the data, such as its source, collection methods, and potential uses. This can help others understand the context of the data and how it may be relevant to their own work or research. Including a related link can also provide access to additional resources or related datasets, further enriching the information available to users."),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("p",null,"For this tutorial, you need to deploy DataHub Quickstart and ingest sample data.\nFor detailed steps, please refer to ",(0,i.kt)("a",{parentName:"p",href:"/docs/tools/tutorials/references/prepare-datahub"},"Prepare Local DataHub Environment"),"."),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"Before adding a description, you need to ensure the targeted dataset is already present in your datahub.\nIf you attempt to manipulate entities that do not exist, your operation will fail.\nIn this guide, we will be using data from sample ingestion.")),(0,i.kt)("p",null,"In this example, we will add a description to ",(0,i.kt)("inlineCode",{parentName:"p"},"user_name "),"column of a dataset ",(0,i.kt)("inlineCode",{parentName:"p"},"fct_users_deleted"),"."),(0,i.kt)("h2",{id:"add-description-with-graphql-not-supported"},"Add Description With GraphQL (Not Supported)"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\ud83d\udeab Adding Description on Dataset via GraphQL is currently not supported.\nPlease check out ",(0,i.kt)("a",{parentName:"p",href:"/docs/tools/tutorials/advantages#our-apis"},"API feature comparison table")," for more information, ")),(0,i.kt)("h2",{id:"add-description-with-python-sdk"},"Add Description With Python SDK"),(0,i.kt)("p",null,"Following code add a description and link to a dataset named ",(0,i.kt)("inlineCode",{parentName:"p"},"fct_users_deleted"),".\nFor more information, please refer to ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/datahub-project/datahub/blob/master/metadata-ingestion/examples/library/dataset_add_documentation.py"},"dataset_add_documentation.py")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-python"},'import logging\nimport time\n\nfrom datahub.emitter.mce_builder import make_dataset_urn\nfrom datahub.emitter.mcp import MetadataChangeProposalWrapper\n\n# read-modify-write requires access to the DataHubGraph (RestEmitter is not enough)\nfrom datahub.ingestion.graph.client import DatahubClientConfig, DataHubGraph\n\n# Imports for metadata model classes\nfrom datahub.metadata.schema_classes import (\n    AuditStampClass,\n    EditableDatasetPropertiesClass,\n    InstitutionalMemoryClass,\n    InstitutionalMemoryMetadataClass,\n)\n\nlog = logging.getLogger(__name__)\nlogging.basicConfig(level=logging.INFO)\n\n\n# Inputs -> owner, ownership_type, dataset\ndocumentation_to_add = "This table contains information on users deleted on a single day. This description is updated via PythonSDK."\nlink_to_add = "https://en.wikipedia.org/wiki/Fact_table"\nlink_description = "This is the definition of what fact table means"\ndataset_urn = make_dataset_urn(platform="hive", name="fct_users_deleted", env="PROD")\n\n# Some helpful variables to fill out objects later\nnow = int(time.time() * 1000)  # milliseconds since epoch\ncurrent_timestamp = AuditStampClass(time=now, actor="urn:li:corpuser:ingestion")\ninstitutional_memory_element = InstitutionalMemoryMetadataClass(\n    url=link_to_add,\n    description=link_description,\n    createStamp=current_timestamp,\n)\n\n\n# First we get the current owners\ngms_endpoint = "http://localhost:8080"\ngraph = DataHubGraph(config=DatahubClientConfig(server=gms_endpoint))\n\ncurrent_editable_properties = graph.get_aspect(\n    entity_urn=dataset_urn, aspect_type=EditableDatasetPropertiesClass\n)\n\nneed_write = False\nif current_editable_properties:\n    if documentation_to_add != current_editable_properties.description:\n        current_editable_properties.description = documentation_to_add\n        need_write = True\nelse:\n    # create a brand new editable dataset properties aspect\n    current_editable_properties = EditableDatasetPropertiesClass(\n        created=current_timestamp, description=documentation_to_add\n    )\n    need_write = True\n\nif need_write:\n    event: MetadataChangeProposalWrapper = MetadataChangeProposalWrapper(\n        entityUrn=dataset_urn,\n        aspect=current_editable_properties,\n    )\n    graph.emit(event)\n    log.info(f"Documentation added to dataset {dataset_urn}")\n\nelse:\n    log.info("Documentation already exists and is identical, omitting write")\n\n\ncurrent_institutional_memory = graph.get_aspect(\n    entity_urn=dataset_urn, aspect_type=InstitutionalMemoryClass\n)\n\nneed_write = False\n\nif current_institutional_memory:\n    if link_to_add not in [x.url for x in current_institutional_memory.elements]:\n        current_institutional_memory.elements.append(institutional_memory_element)\n        need_write = True\nelse:\n    # create a brand new institutional memory aspect\n    current_institutional_memory = InstitutionalMemoryClass(\n        elements=[institutional_memory_element]\n    )\n    need_write = True\n\nif need_write:\n    event = MetadataChangeProposalWrapper(\n        entityUrn=dataset_urn,\n        aspect=current_institutional_memory,\n    )\n    graph.emit(event)\n    log.info(f"Link {link_to_add} added to dataset {dataset_urn}")\n\nelse:\n    log.info(f"Link {link_to_add} already exists and is identical, omitting write")\n')),(0,i.kt)("p",null,"We're using the ",(0,i.kt)("inlineCode",{parentName:"p"},"MetdataChangeProposalWrapper")," to change entities in this example.\nFor more information about the ",(0,i.kt)("inlineCode",{parentName:"p"},"MetadataChangeProposal"),", please refer to ",(0,i.kt)("a",{parentName:"p",href:"/docs/advanced/mcp-mcl"},"MetadataChangeProposal & MetadataChangeLog Events")),(0,i.kt)("h2",{id:"expected-outcomes"},"Expected Outcomes"),(0,i.kt)("p",null,"You can now see the description is added to ",(0,i.kt)("inlineCode",{parentName:"p"},"fct_users_deleted"),". "),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"dataset-description-added",src:n(24980).Z,width:"1313",height:"671"})))}c.isMDXComponent=!0},24980:(t,e,n)=>{n.d(e,{Z:()=>a});const a=n.p+"assets/images/dataset-description-added-5fc16de174caeaed47f9b641b1360b0b.png"}}]);